<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>POJ 1742 • c0ks'S TECH BLOG</title>
    <meta name="description" content="
  动态规划（男人8题系列）


">
    <meta name="keywords" content="">
    
    	<!-- Twitter Cards -->
	<meta name="twitter:title" content="POJ 1742">
	<meta name="twitter:description" content="
  动态规划（男人8题系列）


">
	
	
	
	<meta name="twitter:card" content="summary">
	<meta name="twitter:image" content="http://localhost:4000/images/logo.jpg">
	
	<!-- Open Graph -->
	<meta property="og:locale" content="">
	<meta property="og:type" content="article">
	<meta property="og:title" content="POJ 1742">
	<meta property="og:description" content="
  动态规划（男人8题系列）


">
	<meta property="og:url" content="http://localhost:4000/algorithm/POJ-1742/">
	<meta property="og:site_name" content="c0ks'S TECH BLOG">

    <link rel="canonical" href="http://localhost:4000/algorithm/POJ-1742/">

    <link href="http://localhost:4000/atom.xml" type="application/atom+xml" rel="alternate" title="c0ks'S TECH BLOG Atom Feed">
    <link href="http://localhost:4000/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">

    <link rel="stylesheet" href="http://localhost:4000/css/main.css">
    <!-- HTML5 Shiv and Media Query Support for IE -->
    <!--[if lt IE 9]>
      <script src="http://localhost:4000/js/vendor/html5shiv.min.js"></script>
      <script src="http://localhost:4000/js/vendor/respond.min.js"></script>
    <![endif]-->

  </head>

  <body id="js-body">
    <!--[if lt IE 9]><div class="upgrade notice-warning"><strong>Your browser is quite old!</strong> Why not <a href="http://whatbrowser.org/">upgrade to a newer one</a> to better enjoy this site?</div><![endif]-->

    <header id="masthead">
  <div class="inner-wrap">
    <a href="http://localhost:4000/" class="site-title">c0ks'S TECH BLOG</a>
    <nav role="navigation" class="menu top-menu">
        <ul class="menu-item">
	<li class="home"><a href="/">c0ks'S TECH BLOG</a></li>
	
    
    <li><a href="http://localhost:4000/" >Home</a></li>
  
    
    <li><a href="http://localhost:4000/language/" >Language</a></li>
  
    
    <li><a href="http://localhost:4000/linux/" >Linux</a></li>
  
    
    <li><a href="http://localhost:4000/algorithm/" >Algorithm</a></li>
  
    
    <li><a href="http://localhost:4000/about/" >About Me</a></li>
  
</ul>
    </nav>
  </div><!-- /.inner-wrap -->
</header><!-- /.masthead -->
    <nav role="navigation" id="js-menu" class="sliding-menu-content">
  <h5>c0ks'S TECH BLOG <span></span></h5>
  <ul class="menu-item">
    <li>
      <a href="http://localhost:4000/">
        
        <div class="title">Home</div>
        
      </a>
    </li><li>
      <a href="http://localhost:4000/language/">
        
        <div class="title">Language</div>
        
      </a>
    </li><li>
      <a href="http://localhost:4000/linux/">
        
        <div class="title">Linux</div>
        
      </a>
    </li><li>
      <a href="http://localhost:4000/algorithm/">
        
        <div class="title">Algorithm</div>
        
      </a>
    </li><li>
      <a href="http://localhost:4000/about/">
        
        <div class="title">About Me</div>
        
      </a>
    </li>
  </ul>
</nav>
<button type="button" id="js-menu-trigger" class="sliding-menu-button lines-button x2" role="button" aria-label="Toggle Navigation">
  <span class="nav-lines"></span>
</button>

<div id="js-menu-screen" class="menu-screen"></div>


    <div id="page-wrapper">
      <div id="main" role="main">
	<article class="wrap" itemscope itemtype="http://schema.org/Article">
		
		
  <nav class="breadcrumbs">
    <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
      <a href="http://localhost:4000" itemprop="url">
        <span itemprop="title">Home</span>
      </a> › 
    <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
      <a href="http://localhost:4000/algorithm/" itemprop="url">
        <span itemprop="title">Algorithm</span>
      </a>
    </span>
  </nav><!-- /.breadcrumbs -->

		<div class="page-title">
			<h1>POJ 1742</h1>
		</div>
		<div class="inner-wrap">
			<div id="content" class="page-content" itemprop="articleBody">
				<blockquote>
  <p>动态规划（男人8题系列）</p>
</blockquote>

<h3 id="题意">题意</h3>
<p>多枚不同面值的硬币，问能形成的面值数。</p>

<h3 id="题解">题解</h3>
<p>和挑战程序设计书中的多重部分和（P63）问题相似，用动态规划解决，AC代码看第三段。</p>

<p><strong>1. 未优化，将重复的硬币展开后放一个一维数组中，即将它们当不同的硬币来考虑。这样导致内存超出或者超时</strong></p>

<blockquote>
  <p>dp[i][j]等于1表示前i枚硬币可以形成价值j，0表示不能形成
```cpp
#include <iostream>
#include <cstring>
using namespace std;
const int MAXN = 1001;
const int MAXVAL = 1001;</cstring></iostream></p>
</blockquote>

<p>int dp[MAXN][MAXVAL];
int val[MAXN];
int num[MAXN];
int coins[MAXN];
int n,m;
int amount;
int result;
void solve()
{
    memset(dp, 0, sizeof(dp));
	result = 0;
    dp[1][val[0]] = 1;
    for(int i = 0; i &lt;= amount; i++)  //init the dp[i][0] = 1;
    {
        dp[i][0] = 1;
    }
	for(int i = 2; i &lt;= amount; i++)
	{
		for(int j = 0; j &lt;= m; j++)
		{
			if(j - coins[i] &gt;= 0 &amp;&amp; dp[i-1][j-coins[i]] == 1) //需要第i枚硬币形成价值j
                dp[i][j] = 1;
			if(dp[i-1][j] == 1)  //不需要第i枚硬币就可以形成价值j
				dp[i][j] = 1;
		}
	}</p>

<div class="highlighter-rouge"><pre class="highlight"><code>for(int i  = 1; i &lt;= m; i++)
{
    if(dp[amount][i] == 1)
        result++;
}
</code></pre>
</div>

<p>}
int main()
{
	while(cin » n » m &amp;&amp; (n != 0 &amp;&amp; m != 0))
	{
		for(int i = 0; i &lt; n; i++)
			cin » val[i];
        amount = 0;
		for(int i = 0; i &lt; n; i++)
		{
			cin » num[i];
			amount += num[i];
		}
		int k = 1;
		for(int i = 0; i &lt; n; i++)  //unfold the coins, index start with 1 
		{
			for(int j = 0; j &lt; num[i]; j++) 
				coins[k++] = val[i]; 
		}
		solve();
		cout « result « endl;
	}
	return 0;
}</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
**2.通过用循环次数表示此次加入的硬币i，可以优化成一维数组的dp，但还是导致超时。**

注意：需要从价值m往前更新数组，这样可以使得此次循环(表示第i枚硬币)用的是上次循环（第i-1枚硬币）更新后的数组
```c++

#include &lt;iostream&gt;
#include &lt;cstring&gt;
using namespace std;
const int MAXN = 100006;

int dp[MAXN];
int val[MAXN];
int num[MAXN];
int coins[MAXN];
int n,m;
int amount;
int result;
void solve()
{
    memset(dp, 0, sizeof(dp));
	result = 0;
    dp[0] = 1;
	for(int i = 1; i &lt;= amount; i++)
	{
		for(int j = m; j &gt;= coins[i]; j--)
		{

            if(!dp[j] &amp;&amp; dp[j-coins[i]] )
            {
                dp[j] = 1;
                result++;
            }

		}
	}

}
int main()
{
	while(cin &gt;&gt; n &gt;&gt; m &amp;&amp; (n != 0 &amp;&amp; m != 0))
	{
		for(int i = 0; i &lt; n; i++)
			cin &gt;&gt; val[i];
        amount = 0;
		for(int i = 0; i &lt; n; i++)
		{
			cin &gt;&gt; num[i];
			amount += num[i];
		}
		int k = 1;
		for(int i = 0; i &lt; n; i++)
		{
			for(int j = 0; j &lt; num[i]; j++)
				coins[k++] = val[i];
		}
		solve();
		cout &lt;&lt; result &lt;&lt; endl;
	}
	return 0;
}

</code></pre>
</div>

<p><strong>3.dp数组的值只用来表示能不能形成价值j，有些浪费。</strong></p>

<p>优化成： -1表示不能形成价值j，大于等于0时表示形成价值j后第i件物品的剩余数量</p>

<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;
#include &lt;cstring&gt;
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">MAXN</span> <span class="o">=</span> <span class="mi">100006</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">dp</span><span class="p">[</span><span class="n">MAXN</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">val</span><span class="p">[</span><span class="n">MAXN</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">num</span><span class="p">[</span><span class="n">MAXN</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">solve</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">memset</span><span class="p">(</span><span class="n">dp</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">dp</span><span class="p">));</span>
	<span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 			<span class="c1">//保证第一次循环时第一枚硬币能被更新
</span>	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">--</span><span class="p">)</span>
		<span class="p">{</span>

			<span class="k">if</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">//每个循环开始，都会有dp[0] = num[i]; 
</span>				<span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
			<span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="n">val</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">dp</span><span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="n">val</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">// 第i枚硬币价值超过j或者数量不够时，更新为失败值-1
</span>				<span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="n">val</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>  
		<span class="k">if</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1">//大于等于0的值表示可以形成价值i
</span>			<span class="n">result</span><span class="o">++</span><span class="p">;</span>

<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="k">while</span><span class="p">(</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">m</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">m</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">))</span>
	<span class="p">{</span>
		<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
			<span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">val</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
			<span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="n">solve</span><span class="p">();</span>
		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">result</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

				<hr />
				<footer class="page-footer">
					

<div class="author-image">
	<img src="http://localhost:4000/images/logo.jpg" alt="c0ks">
</div><!-- ./author-image -->
<div class="author-content">
	<h3 class="author-name" > <span itemprop="author">c0ks</span></h3>
	<p class="author-bio"></p>
</div><!-- ./author-content -->
					<div class="inline-btn">
	<a class="btn-social twitter" href="https://twitter.com/intent/tweet?text=POJ%201742&amp;url=http://localhost:4000/algorithm/POJ-1742/&amp;via=" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i>  Twitter</a>
	<a class="btn-social facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/algorithm/POJ-1742/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i>  Facebook</a>
	<a class="btn-social google-plus"  href="https://plus.google.com/share?url=http://localhost:4000/algorithm/POJ-1742/" target="_blank"><i class="fa fa-google-plus" aria-hidden="true"></i>  Google+</a>
</div><!-- /.share-this -->

					<div class="page-meta">
	<p> <time datetime="2016-01-28T00:00:00Z" itemprop="datePublished">January 28, 2016</time></p>
</div><!-- /.page-meta -->
				</footer><!-- /.footer -->
				<aside>
					
				</aside>
			</div><!-- /.content -->
		</div><!-- /.inner-wrap -->
		
	</article><!-- ./wrap -->
</div><!-- /#main -->

      <footer role="contentinfo" id="site-footer">
	<nav role="navigation" class="menu bottom-menu">
		<ul class="menu-item">
		
      
			<li><a href="http://localhost:4000" ></a></li>
		
		</ul>
	</nav><!-- /.bottom-menu -->
	<p class="copyright">&#169; 2016 <a href="http://localhost:4000">c0ks'S TECH BLOG</a> powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> + <a href="http://mmistakes.github.io/skinny-bones-jekyll/" rel="nofollow">Skinny Bones</a>.</p>
</footer>
    </div>

    <script src="http://localhost:4000/js/vendor/jquery-1.9.1.min.js"></script>
    <script src="http://localhost:4000/js/main.js"></script>

  </body>

</html>
