<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>c++ primer读书笔记--第五章 表达式 • c0ks'S TECH BLOG</title>
    <meta name="description" content="
  本系列文章是关于我的c++ primer读书笔记


">
    <meta name="keywords" content="">
    
    	<!-- Twitter Cards -->
	<meta name="twitter:title" content="c++ primer读书笔记--第五章 表达式">
	<meta name="twitter:description" content="
  本系列文章是关于我的c++ primer读书笔记


">
	
	
	
	<meta name="twitter:card" content="summary">
	<meta name="twitter:image" content="http://localhost:4000/images/logo.jpg">
	
	<!-- Open Graph -->
	<meta property="og:locale" content="">
	<meta property="og:type" content="article">
	<meta property="og:title" content="c++ primer读书笔记--第五章 表达式">
	<meta property="og:description" content="
  本系列文章是关于我的c++ primer读书笔记


">
	<meta property="og:url" content="http://localhost:4000/language/c++-primer-note-chapter5/">
	<meta property="og:site_name" content="c0ks'S TECH BLOG">

    <link rel="canonical" href="http://localhost:4000/language/c++-primer-note-chapter5/">

    <link href="http://localhost:4000/atom.xml" type="application/atom+xml" rel="alternate" title="c0ks'S TECH BLOG Atom Feed">
    <link href="http://localhost:4000/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">

    <link rel="stylesheet" href="http://localhost:4000/css/main.css">
    <!-- HTML5 Shiv and Media Query Support for IE -->
    <!--[if lt IE 9]>
      <script src="http://localhost:4000/js/vendor/html5shiv.min.js"></script>
      <script src="http://localhost:4000/js/vendor/respond.min.js"></script>
    <![endif]-->

  </head>

  <body id="js-body">
    <!--[if lt IE 9]><div class="upgrade notice-warning"><strong>Your browser is quite old!</strong> Why not <a href="http://whatbrowser.org/">upgrade to a newer one</a> to better enjoy this site?</div><![endif]-->

    <header id="masthead">
  <div class="inner-wrap">
    <a href="http://localhost:4000/" class="site-title">c0ks'S TECH BLOG</a>
    <nav role="navigation" class="menu top-menu">
        <ul class="menu-item">
	<li class="home"><a href="/">c0ks'S TECH BLOG</a></li>
	
    
    <li><a href="http://localhost:4000/" >Home</a></li>
  
    
    <li><a href="http://localhost:4000/language/" >Language</a></li>
  
    
    <li><a href="http://localhost:4000/linux/" >Linux</a></li>
  
    
    <li><a href="http://localhost:4000/algorithm/" >Algorithm</a></li>
  
    
    <li><a href="http://localhost:4000/about/" >About Me</a></li>
  
</ul>
    </nav>
  </div><!-- /.inner-wrap -->
</header><!-- /.masthead -->
    <nav role="navigation" id="js-menu" class="sliding-menu-content">
  <h5>c0ks'S TECH BLOG <span></span></h5>
  <ul class="menu-item">
    <li>
      <a href="http://localhost:4000/">
        
        <div class="title">Home</div>
        
      </a>
    </li><li>
      <a href="http://localhost:4000/language/">
        
        <div class="title">Language</div>
        
      </a>
    </li><li>
      <a href="http://localhost:4000/linux/">
        
        <div class="title">Linux</div>
        
      </a>
    </li><li>
      <a href="http://localhost:4000/algorithm/">
        
        <div class="title">Algorithm</div>
        
      </a>
    </li><li>
      <a href="http://localhost:4000/about/">
        
        <div class="title">About Me</div>
        
      </a>
    </li>
  </ul>
</nav>
<button type="button" id="js-menu-trigger" class="sliding-menu-button lines-button x2" role="button" aria-label="Toggle Navigation">
  <span class="nav-lines"></span>
</button>

<div id="js-menu-screen" class="menu-screen"></div>


    <div id="page-wrapper">
      <div id="main" role="main">
	<article class="wrap" itemscope itemtype="http://schema.org/Article">
		
		
  <nav class="breadcrumbs">
    <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
      <a href="http://localhost:4000" itemprop="url">
        <span itemprop="title">Home</span>
      </a> › 
    <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
      <a href="http://localhost:4000/language/" itemprop="url">
        <span itemprop="title">Language</span>
      </a>
    </span>
  </nav><!-- /.breadcrumbs -->

		<div class="page-title">
			<h1>c++ primer读书笔记--第五章 表达式</h1>
		</div>
		<div class="inner-wrap">
			<div id="content" class="page-content" itemprop="articleBody">
				<blockquote>
  <p>本系列文章是关于我的c++ primer读书笔记</p>
</blockquote>

<p>C++ 还支持操作符重载，允许程序员自定义用于类类型时操作符的含义。标准库正是使用这种功能定义用于库类型的操作符。</p>

<h2 id="算术操作符">算术操作符</h2>

<p><img src="http://img.blog.csdn.net/20150630195420482" alt="这里写图片描述" /></p>

<h2 id="关系操作符和逻辑操作符">关系操作符和逻辑操作符</h2>

<p><img src="http://img.blog.csdn.net/20150630195432505" alt="这里写图片描述" /></p>

<h2 id="位操作符">位操作符</h2>

<p><img src="http://img.blog.csdn.net/20150630195448863" alt="这里写图片描述" /></p>

<p><strong>对于位操作符，由于系统不能确保如何处理其操作数的符号位，所以强烈建议使用 unsigned 整型操作数。</strong></p>

<h3 id="bitset--对象或整型值的使用">bitset  对象或整型值的使用</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>bitset&lt;30&gt; bitset_quiz1;//声明
bitset_quiz1[27];//取第27位
 bitset_quiz1.set(27); //第 27 位设置为 1
bitset_quiz1.reset(27);//第 27 位设置为 0
</code></pre>
</div>

<h3 id="io--操作符为左结合">IO  操作符为左结合</h3>
<p>像其他二元操作符一样，移位操作符也是左结合的。
移位操作符具有中等优先级：其优先级比算术操作符低，但比关系操作符、赋值操作符和条件操作符优先级高。</p>

<div class="highlighter-rouge"><pre class="highlight"><code> cout &lt;&lt; "hi" &lt;&lt; " there" &lt;&lt; endl;
</code></pre>
</div>

<p>执行为：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>( (cout &lt;&lt; "hi") &lt;&lt; " there" ) &lt;&lt; endl;
</code></pre>
</div>

<h2 id="赋值操作符">赋值操作符</h2>
<p>赋值操作符的左操作数必须是非 const 的左值。下面的赋值语句是不合法的：</p>

<div class="highlighter-rouge"><pre class="highlight"><code> int i, j, ival; 
 const int ci = i;  // ok: initialization not assignment 
 1024 = ival;       // error: literals are rvalues 
 i + j = ival;      // error: arithmetic expressions are rvalues 
 ci = ival;         // error: can't write to ci
</code></pre>
</div>

<h3 id="赋值操作的右结合性">赋值操作的右结合性</h3>
<p>与下标和解引用操作符一样，赋值操作也返回左值。同理，只要被赋值的每个操作数都具有相同的通用类型，C++语言允许将这多个赋值操作写在一个表达式中;与其他二元操作符不同，赋值操作具有右结合特性。当表达式含有多个赋值操作符时，从右向左结合：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int ival, jval; 
 ival = jval = 0; // ok: each assigned 0
</code></pre>
</div>

<h3 id="赋值操作具有低优先级">赋值操作具有低优先级</h3>

<h3 id="复合赋值操作符">复合赋值操作符</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>	+=   -=   *=   /=   %=   // arithmetic operators
 &lt;&lt;= &gt;&gt;=   &amp;=   ^=   |=   // bitwise operators 
</code></pre>
</div>

<h2 id="箭头操作符">箭头操作符</h2>
<p>C++ 语言为包含点操作符和解引用操作符的表达式提供了一个同义词：箭头操作符（-&gt;）。点操作符（第 1.5.2 节）用于获取类类型对象的成员：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>item1.same_isbn(item2); // run the same_isbn member of item1
</code></pre>
</div>

<p>如果有一个<strong>指向 Sales_item 对象的指针</strong>（或迭代器），则在<strong>使用点操作符前，需对该指针（或迭代器）进行解引用</strong>：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    Sales_item *sp = &amp;item1; 
     (*sp).same_isbn(item2); // run same_isbn on object to which sp points 
</code></pre>
</div>

<p>C++ 为在点操作符后使用的解引用操作定义了一个同义词：箭头操作符（-&gt;）。假设有一个指向类类型对象的指针（或迭代器），下面的表达式相互等价：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sp-&gt;same_isbn(item2); // equivalent to (*sp).same_isbn(item2)
</code></pre>
</div>

<h2 id="条件操作符">条件操作符</h2>
<p>条件操作符是 C++ 中唯一的三元操作符，它允许将简单的 if-else 判断语句嵌入表达式中。条件操作符的语法格式为：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cond ? expr1 : expr2;
</code></pre>
</div>

<p>条件操作符首先计算 cond 的值，如果 cond 的值为 0，则条件为 false；如果 cond 非 0，则条件为 true。然后，条件为 true 时计算 expr1 ，否则计算 expr2 。</p>

<h2 id="sizeof-操作符">sizeof 操作符</h2>
<p>sizeof 操作符的作用是<strong>返回一个对象或类型名的长度</strong>，返回值的类型为 size_t（第 3.5.2 节），长度的单位是字节（第 2.1 节）。size_t 表达式的结果是编译时常量，该操作符有以下三种语法形式：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sizeof (type name); 
     sizeof (expr); //expr=表达式
     sizeof expr;
</code></pre>
</div>

<p>注:将 sizeof 应用在表达式 expr 上，将获得该表达式的结果的类型长度
所以<strong>将 sizeof 用于 expr 时，并没有计算表达式 expr 的值。</strong>特别是在 sizeof *p 中，指针 p 可以持有一个无效地址，因为不需要对 p 做解引用操作。</p>

<h3 id="使用-sizeof-的结果部分地依赖所涉及的类型">使用 sizeof 的结果部分地依赖所涉及的类型：</h3>
<p>•   对 char 类型或值为 char 类型的表达式做 sizeof 操作保证得 1。 
•   对引用类型做 sizeof 操作将返回存放此引用类型对象所需的内在空间大小。 
•   对指针做 sizeof 操作将返回存放指针所需的内在大小；注意，如果要获取该指针所指向对象的大小，则必须对指针进行解引用。
•   对数组做 sizeof 操作等效于将<strong>对其元素类型做 sizeof 操作的结果乘上数组元素的个数</strong>。</p>

<p>注:因为 sizeof 返回整个数组在内存中的存储长度，所以用 sizeof 数组的结
果除以 sizeof 其元素类型的结果，即可<strong>求出数组元素的个数</strong>：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int sz = sizeof(ia)/sizeof(*ia);
</code></pre>
</div>

<h3 id="逗号操作符">逗号操作符</h3>
<p>逗号表达式是一组由逗号分隔的表达式，<strong>这些表达式从左向右计算。逗号表达式的结果是其最右边表达式的值。</strong>如果最右边的操作数是左值，则逗号表达式的值也是左值。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int a1,a2,b=2,c=7,d=5;
a1=(++b,c--,d+3);
a2=++b,c--,d+3;
</code></pre>
</div>

<p>*对于给a1赋值的代码，有三个表达式，用逗号分开，所以最终的值应该是最后一个表达式的值，也就是(d+3)的值，为8，所以a1的值为8。
*对于给a2赋值的代码，也是有三个表达式，这时的三个表达式为a2=++b、c–、d+3,(这是因为赋值运算符比逗号运算符优先级高)所以最终表达式的值虽然也为8，但a2=4（第2行代码运算完时，b=3，即第3行代码运行时，b的值为3）。</p>

<h2 id="复合表达式计算">复合表达式计算</h2>

<h3 id="优先级">优先级</h3>

<p><img src="http://img.blog.csdn.net/20150630195512681" alt="这里写图片描述" /></p>

<div class="highlighter-rouge"><pre class="highlight"><code>if (ia[index++] &lt; ia[index])
</code></pre>
</div>

<p>此表达式的行为没有明确定义。问题在于：&lt; 操作符的左右操作数都使用了 index 变量，但是，左操作数更改了该变量的值。假设 index 初值为 0，编译器可以用下面两种方式之一求该表达式的值：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>if (ia[0] &lt; ia[0]) // execution if rhs is evaluated first 
 if (ia[0] &lt; ia[1]) // execution if lhs is evaluated first 
</code></pre>
</div>

<p>改为下述语句可以明确该表达式:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>if (ia[index] &lt; ia[index + 1]) { 
         // do whatever 
     } 
     ++index;
</code></pre>
</div>

<h2 id="new--和-delete-表达式">new  和 delete 表达式</h2>
<p>使用 new 和 delete 表达式<strong>动态创建和释放数组</strong>，这两种表达式也可用于动态创建和释放单个对象。
定义变量时，必须指定其数据类型和名字。而<strong>动态创建对象时，只需指定其数据类型，而不必为该对象命名</strong>。取而代之的是，new 表达式返回指向新创建对象的指针，我们通过该指针来访问此对象：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int i;              // named, uninitialized int variable 
 int *pi = new int;  // pi points to dynamically allocated, 
                     // unnamed, uninitialized int
</code></pre>
</div>

<h3 id="动态创建对象的初始化">动态创建对象的初始化</h3>
<p>动态创建的对象可用初始化变量的方式实现初始化：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int i(1024);              // value of i is 1024
 int *pi = new int(1024);  // object to which pi points is 1024 
 string s(10, '9');                   // value of s is "999 9999999" 
 string *ps = new string(10, '9');    // *ps is "9999999999" 
 delete ps;//回收ps指向的空间
</code></pre>
</div>

<h3 id="const---对象的动态分配和回收">const   对象的动态分配和回收</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>// allocate and initialize a const object 
     const int *pci = new const int(1024); 
</code></pre>
</div>

<p>尽管程序员不能改变 const 对象的值，但可撤销对象本身。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>delete pci; // ok: deletes a const object
</code></pre>
</div>

<h2 id="类型转换">类型转换</h2>

<h3 id="隐式转换">隐式转换</h3>
<p>转换为不损失精度的数,int-&gt;double</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int ival = 0; 
     ival = 3.541 + 3; // typically compiles with a warning
</code></pre>
</div>

<p>本例中，整数 3 被转换为 double 类型，然后执行浮点类型的加法操作，得 double 类型的结果 6.541。再讲double 类型转换为int型的6</p>

<h3 id="算术转换">算术转换</h3>

<p>最简单的转换为整型提升：对于所有比 int 小的整型，包括 char、signed char、unsigned char、short 和 unsigned short，如果该类型的所有可能的值都能包容在 int 内，它们就会被提升为 int型，否则，它们将被提升为 unsigned int。如果将 bool 值提升为 int ，则false 转换为 0，而 true 则转换为 1。</p>

<h4 id="有符号与无符号类型之间的转换">有符号与无符号类型之间的转换</h4>

<p>unsigned 操作数的转换依赖于机器中整型的相对大小，因此，这类转换本质上依赖于机器。</p>

<h4 id="转换与枚举类型">转换与枚举类型</h4>

<p>注:枚举型是一个集合，集合中的<strong>元素(枚举成员)是一些命名的整型常量</strong>，元素之间用逗号,隔开。
C++ 自动将枚举类型（第 2.7 节）的对象或枚举成员（ enumerator ）转换为整型，其转换结果可用于任何要求使用整数值的地方。</p>

<h4 id="转换为--const---对象">转换为  const   对象</h4>

<p>当使用非 const 对象初始化 const 对象的引用时，系统将非 const 对象转换为 const 对象。此外，还可以将非 const 对象的地址（或非 const 指针）转换为指向相关 const 类型的指针：</p>

<h4 id="命名的强制类型转换cast">命名的强制类型转换(cast)</h4>

<p>命名的强制类型转换符号的一般形式如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code> cast-name&lt;type&gt;(expression);
</code></pre>
</div>

<p>其中 cast-name 为 static_cast、dynamic_cast、const_cast 和reinterpret_cast 之一，type 为转换的目标类型，而 expression 则是被强制转换的值。强制转换的类型指定了在 expression上执行某种特定类型的转换。</p>

<h4 id="旧式强制类型转换">旧式强制类型转换</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>char *pc = (char*) ip;
</code></pre>
</div>

<p><strong>效果与使用 reinterpret_cast 符号相同</strong>，但这种强制转换的可视性比较差，难以跟踪错误的转换。</p>

<p>旧式强制转换符号有下列两种形式：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>type (expr); // Function-style cast notation 
 (type) expr; // C-language-style cast notation
</code></pre>
</div>

				<hr />
				<footer class="page-footer">
					

<div class="author-image">
	<img src="http://localhost:4000/images/logo.jpg" alt="c0ks">
</div><!-- ./author-image -->
<div class="author-content">
	<h3 class="author-name" > <span itemprop="author">c0ks</span></h3>
	<p class="author-bio"></p>
</div><!-- ./author-content -->
					<div class="inline-btn">
	<a class="btn-social twitter" href="https://twitter.com/intent/tweet?text=c++%20primer读书笔记--第五章%20表达式&amp;url=http://localhost:4000/language/c++-primer-note-chapter5/&amp;via=" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i>  Twitter</a>
	<a class="btn-social facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/language/c++-primer-note-chapter5/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i>  Facebook</a>
	<a class="btn-social google-plus"  href="https://plus.google.com/share?url=http://localhost:4000/language/c++-primer-note-chapter5/" target="_blank"><i class="fa fa-google-plus" aria-hidden="true"></i>  Google+</a>
</div><!-- /.share-this -->

					<div class="page-meta">
	<p> <time datetime="2015-12-18T00:00:00Z" itemprop="datePublished">December 18, 2015</time></p>
</div><!-- /.page-meta -->
				</footer><!-- /.footer -->
				<aside>
					
				</aside>
			</div><!-- /.content -->
		</div><!-- /.inner-wrap -->
		
	</article><!-- ./wrap -->
</div><!-- /#main -->

      <footer role="contentinfo" id="site-footer">
	<nav role="navigation" class="menu bottom-menu">
		<ul class="menu-item">
		
      
			<li><a href="http://localhost:4000" ></a></li>
		
		</ul>
	</nav><!-- /.bottom-menu -->
	<p class="copyright">&#169; 2016 <a href="http://localhost:4000">c0ks'S TECH BLOG</a> powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> + <a href="http://mmistakes.github.io/skinny-bones-jekyll/" rel="nofollow">Skinny Bones</a>.</p>
</footer>
    </div>

    <script src="http://localhost:4000/js/vendor/jquery-1.9.1.min.js"></script>
    <script src="http://localhost:4000/js/main.js"></script>

  </body>

</html>
